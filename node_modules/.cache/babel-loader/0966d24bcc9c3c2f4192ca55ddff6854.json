{"ast":null,"code":"var _jsxFileName = \"/Users/habeebawolumate/Documents/Builds/e-commerce/src/SignUp.js\",\n    _s = $RefreshSig$();\n\nimport { Password } from '@mui/icons-material';\nimport { createUserWithEmailAndPassword, updateProfile } from 'firebase/auth';\nimport React, { useEffect, useState } from 'react';\nimport { auth, db, userColRef } from \"./backend/firebase\";\nimport { useDispatch, useSelector } from 'react-redux';\nimport { login } from \"./features/userSlice\";\nimport { addDoc, doc, getDoc, getDocs, setDoc, serverTimestamp } from 'firebase/firestore';\nimport { useNavigate } from 'react-router-dom';\nimport \"./SignUp.css\";\nimport { isProfiler } from 'react-is';\nimport \"./SignIn.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction SignUp() {\n  _s();\n\n  const [firstName, setFirstName] = useState(\"\");\n  const [lastName, setLastName] = useState(\"\");\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [comfirmPassword, setComfirmPassword] = useState(\"\");\n  const [errorMessage, setErrorMessage] = useState(null);\n  const dispatch = useDispatch();\n  const user = useSelector(state => state.user.user);\n  const navigate = useNavigate(); // console.log(user);\n  // console.log(auth.currentUser);\n\n  const verifyPassword = password => {\n    const pwFormat = /^(?=.*\\d)(?=.*[a-z])(?=.*[A-Z]).{8,20}$/;\n\n    if (password == comfirmPassword && password.match(pwFormat)) {\n      return true;\n    } else {\n      setErrorMessage(\"Password must contain atleast one Uppercase Letter, one lowecase letter, a number, and must be within 8 to 15 characters\");\n      return false;\n    }\n  };\n\n  const handleSignUp = eventObj => {\n    eventObj.preventDefault(); //create password complexity\n\n    verifyPassword(password) && createUserWithEmailAndPassword(auth, email, password).then(userCredential => {\n      console.log(\"user created\", userCredential.user.uid);\n      console.log(auth.currentUser.uid);\n      updateProfile(auth.currentUser, {\n        displayName: `${firstName} ${lastName}`\n      }).then(() => {\n        // console.log(auth.currentUser.displayName)\n        setDoc(doc(db, \"Users\", auth.currentUser.uid), {\n          fullName: userCredential.user.displayName,\n          userId: userCredential.user.uid,\n          email: userCredential.user.email,\n          timestamp: serverTimestamp()\n        }).catch(err => {\n          throw err;\n        });\n      }).then(() => {\n        getDoc(doc(db, \"Users\", userCredential.user.uid)).then(doc => {\n          console.log(doc.data(), doc.id);\n          dispatch(login({\n            fullName: doc.data().fullName,\n            userId: doc.data().userId,\n            email: doc.data().email,\n            timestamp: doc.data().timestamp\n          }));\n        }).catch(err => {\n          throw err;\n        });\n      });\n    }).then(() => {\n      navigate(\"/\");\n      setFirstName(\"\");\n      setLastName(\"\");\n      setEmail(\"\");\n      setPassword(\"\");\n      setComfirmPassword(\"\");\n      navigate(\"/\");\n    }).catch(error => {\n      console.log(error);\n    });\n  };\n\n  useEffect(() => {\n    errorMessage && alert(errorMessage);\n    setErrorMessage(null);\n  }, [errorMessage]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSignUp,\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        value: firstName,\n        onChange: e => {\n          setFirstName(e.target.value);\n        },\n        type: \"text\",\n        placeholder: \"First Name\",\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 15\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        value: lastName,\n        onChange: e => {\n          setLastName(e.target.value);\n        },\n        type: \"text\",\n        placeholder: \"Last Name\",\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 15\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        value: email,\n        onChange: e => {\n          setEmail(e.target.value);\n        },\n        type: \"text\",\n        placeholder: \"Email\",\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 15\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        value: password,\n        onChange: e => {\n          setPassword(e.target.value);\n        },\n        type: \"password\",\n        placeholder: \"Password\",\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 15\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        value: comfirmPassword,\n        onChange: e => {\n          setComfirmPassword(e.target.value);\n        },\n        type: \"password\",\n        placeholder: \"Comfirm Password\",\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 15\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        children: \"SignUp\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 15\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 90,\n    columnNumber: 5\n  }, this);\n}\n\n_s(SignUp, \"Ith5Ty4qg6RZz0b4RBPIkeuVLTI=\", false, function () {\n  return [useDispatch, useSelector, useNavigate];\n});\n\n_c = SignUp;\nexport default SignUp;\n\nvar _c;\n\n$RefreshReg$(_c, \"SignUp\");","map":{"version":3,"names":["Password","createUserWithEmailAndPassword","updateProfile","React","useEffect","useState","auth","db","userColRef","useDispatch","useSelector","login","addDoc","doc","getDoc","getDocs","setDoc","serverTimestamp","useNavigate","isProfiler","SignUp","firstName","setFirstName","lastName","setLastName","email","setEmail","password","setPassword","comfirmPassword","setComfirmPassword","errorMessage","setErrorMessage","dispatch","user","state","navigate","verifyPassword","pwFormat","match","handleSignUp","eventObj","preventDefault","then","userCredential","console","log","uid","currentUser","displayName","fullName","userId","timestamp","catch","err","data","id","error","alert","e","target","value"],"sources":["/Users/habeebawolumate/Documents/Builds/e-commerce/src/SignUp.js"],"sourcesContent":["import { Password } from '@mui/icons-material';\nimport { createUserWithEmailAndPassword, updateProfile } from 'firebase/auth';\nimport React, { useEffect, useState } from 'react'\nimport { auth, db, userColRef } from \"./backend/firebase\";\nimport { useDispatch, useSelector } from 'react-redux'\nimport {login} from \"./features/userSlice\"\nimport { addDoc, doc, getDoc, getDocs , setDoc, serverTimestamp} from 'firebase/firestore';\nimport { useNavigate } from 'react-router-dom';\nimport \"./SignUp.css\"\nimport { isProfiler } from 'react-is';\nimport \"./SignIn.css\"\nfunction SignUp() {\n    const [firstName, setFirstName] = useState(\"\");\n    const [lastName, setLastName] = useState(\"\");\n    const [email, setEmail] = useState(\"\");\n    const [password, setPassword] = useState(\"\");\n  const [comfirmPassword, setComfirmPassword] = useState(\"\");\n  const [errorMessage, setErrorMessage] = useState(null)\n    const dispatch = useDispatch();\n  const user = useSelector(state => state.user.user);\n  const navigate = useNavigate()\n    // console.log(user);\n  // console.log(auth.currentUser);\n  const verifyPassword = (password) => {\n    const pwFormat = /^(?=.*\\d)(?=.*[a-z])(?=.*[A-Z]).{8,20}$/\n    if (password == comfirmPassword && password.match(pwFormat)) {\n      return true\n    } else {\n      setErrorMessage(\"Password must contain atleast one Uppercase Letter, one lowecase letter, a number, and must be within 8 to 15 characters\")\n      return false;\n    }\n  }\n\n  const handleSignUp = (eventObj) => {\n    eventObj.preventDefault();\n\n    //create password complexity\n   \n    \n    verifyPassword(password) && createUserWithEmailAndPassword(auth, email, password)\n      .then((userCredential) => {\n        console.log(\"user created\", userCredential.user.uid)\n        console.log(auth.currentUser.uid)\n\n        updateProfile(auth.currentUser, {\n          displayName: `${firstName} ${lastName}`\n        })\n        .then(() => {\n          // console.log(auth.currentUser.displayName)\n          setDoc(doc(db, \"Users\", auth.currentUser.uid), {\n            fullName: userCredential.user.displayName,\n            userId: userCredential.user.uid,\n            email: userCredential.user.email,\n            timestamp: serverTimestamp(),\n          })\n          .catch((err) => {throw(err)})\n        })\n        .then(() => {\n          getDoc(doc(db, \"Users\", userCredential.user.uid))\n            .then((doc) => {\n              console.log(doc.data(), doc.id)\n              dispatch(login({\n                fullName: doc.data().fullName,\n                userId: doc.data().userId,\n                email: doc.data().email,\n                timestamp: doc.data().timestamp,\n              }))\n            })\n          .catch((err) =>{ throw(err)})\n        })\n    })\n    .then(() => {\n      navigate(\"/\");\n      setFirstName(\"\")\n      setLastName(\"\")\n      setEmail(\"\")\n      setPassword(\"\")\n      setComfirmPassword(\"\")\n      navigate(\"/\");\n    })\n    .catch((error) => {\n      console.log(error)\n    })\n  }\n  useEffect(() => {\n    errorMessage && alert(errorMessage)\n    setErrorMessage(null)\n  },[errorMessage])\n  return (\n    <div>\n        <form onSubmit={handleSignUp}>\n              <input value={firstName} onChange={(e)=>{setFirstName(e.target.value)}} type=\"text\" placeholder=\"First Name\" required /> \n              <input value={lastName} onChange={(e) => { setLastName(e.target.value) }} type=\"text\" placeholder=\"Last Name\" required /> \n              <input value={email} onChange={(e) => { setEmail(e.target.value) }} type=\"text\" placeholder=\"Email\" required /> \n\n              <input value={password} onChange={(e)=>{setPassword(e.target.value)}} type=\"password\" placeholder=\"Password\"  required/>\n              <input value={comfirmPassword} onChange={(e)=>{setComfirmPassword(e.target.value)}} type=\"password\" placeholder=\"Comfirm Password\" required/>\n              \n              <button type='submit'>SignUp</button>\n      </form>\n    </div>\n  )\n}\n\nexport default SignUp;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}
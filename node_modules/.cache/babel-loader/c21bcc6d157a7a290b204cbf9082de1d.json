{"ast":null,"code":"import { collection, doc, getDoc, increment, orderBy, query, serverTimestamp, setDoc, updateDoc } from \"firebase/firestore\";\n\nconst handleAddToCart = thisProduct => {\n  if (user) {\n    const cartColRef = collection(db, \"Users\", user.userId, \"userCart\");\n    const createColRef = doc(db, \"Users\", user.userId, \"userCart\", `${thisProduct.id}`);\n    const q = query(cartColRef, orderBy(\"timestamp\", \"desc\"));\n    getDoc(createColRef).then(doc => {\n      if (doc.exists()) {\n        updateDoc(createColRef, {\n          quantity: increment(1),\n          productTotal: increment(thisProduct.price)\n        });\n      } else {\n        setDoc(createColRef, { ...thisProduct,\n          timestamp: serverTimestamp(),\n          quantity: 1,\n          productTotal: thisProduct.price\n        }).catch(err => {\n          console.log(err);\n        });\n      }\n    }); // else if (!createColRef) {\n    // }\n  } else {\n    navigate('/signIn');\n  }\n};\n\nexport default handleAddToCart;","map":{"version":3,"names":["collection","doc","getDoc","increment","orderBy","query","serverTimestamp","setDoc","updateDoc","handleAddToCart","thisProduct","user","cartColRef","db","userId","createColRef","id","q","then","exists","quantity","productTotal","price","timestamp","catch","err","console","log","navigate"],"sources":["/Users/habeebawolumate/Documents/Builds/e-commerce/src/handleAddToCart.js"],"sourcesContent":["import {\n    collection,\n    doc,\n    getDoc,\n    increment,\n    orderBy,\n    query,\n    serverTimestamp,\n    setDoc,\n    updateDoc\n} from \"firebase/firestore\";\n\n\nconst handleAddToCart = (thisProduct) => {\n    \n    if (user) {\n      const cartColRef = collection(db, \"Users\", user.userId, \"userCart\");\n      const createColRef = doc(db, \"Users\", user.userId, \"userCart\", `${thisProduct.id}`);\n      const q = query(cartColRef, orderBy(\"timestamp\", \"desc\"));\n      getDoc(createColRef)\n        .then((doc) => {\n          if (doc.exists()) {\n            updateDoc(createColRef, {\n              quantity: increment(1),\n              productTotal: increment(thisProduct.price)\n            })\n        } else{\n        setDoc(createColRef, {\n          ...thisProduct,\n          timestamp: serverTimestamp(),\n          quantity: 1,\n          productTotal: thisProduct.price\n        })\n        .catch((err)=>{\n          console.log(err)\n        })\n        }\n        \n      });\n      \n        \n              // else if (!createColRef) {\n\n        \n      // }\n      \n\n      \n    } else {\n      navigate('/signIn');\n    }\n    \n}\nexport default handleAddToCart;"],"mappings":"AAAA,SACIA,UADJ,EAEIC,GAFJ,EAGIC,MAHJ,EAIIC,SAJJ,EAKIC,OALJ,EAMIC,KANJ,EAOIC,eAPJ,EAQIC,MARJ,EASIC,SATJ,QAUO,oBAVP;;AAaA,MAAMC,eAAe,GAAIC,WAAD,IAAiB;EAErC,IAAIC,IAAJ,EAAU;IACR,MAAMC,UAAU,GAAGZ,UAAU,CAACa,EAAD,EAAK,OAAL,EAAcF,IAAI,CAACG,MAAnB,EAA2B,UAA3B,CAA7B;IACA,MAAMC,YAAY,GAAGd,GAAG,CAACY,EAAD,EAAK,OAAL,EAAcF,IAAI,CAACG,MAAnB,EAA2B,UAA3B,EAAwC,GAAEJ,WAAW,CAACM,EAAG,EAAzD,CAAxB;IACA,MAAMC,CAAC,GAAGZ,KAAK,CAACO,UAAD,EAAaR,OAAO,CAAC,WAAD,EAAc,MAAd,CAApB,CAAf;IACAF,MAAM,CAACa,YAAD,CAAN,CACGG,IADH,CACSjB,GAAD,IAAS;MACb,IAAIA,GAAG,CAACkB,MAAJ,EAAJ,EAAkB;QAChBX,SAAS,CAACO,YAAD,EAAe;UACtBK,QAAQ,EAAEjB,SAAS,CAAC,CAAD,CADG;UAEtBkB,YAAY,EAAElB,SAAS,CAACO,WAAW,CAACY,KAAb;QAFD,CAAf,CAAT;MAIH,CALC,MAKI;QACNf,MAAM,CAACQ,YAAD,EAAe,EACnB,GAAGL,WADgB;UAEnBa,SAAS,EAAEjB,eAAe,EAFP;UAGnBc,QAAQ,EAAE,CAHS;UAInBC,YAAY,EAAEX,WAAW,CAACY;QAJP,CAAf,CAAN,CAMCE,KAND,CAMQC,GAAD,IAAO;UACZC,OAAO,CAACC,GAAR,CAAYF,GAAZ;QACD,CARD;MASC;IAEF,CAnBD,EAJQ,CA0BA;IAGR;EAID,CAjCD,MAiCO;IACLG,QAAQ,CAAC,SAAD,CAAR;EACD;AAEJ,CAvCD;;AAwCA,eAAenB,eAAf"},"metadata":{},"sourceType":"module"}
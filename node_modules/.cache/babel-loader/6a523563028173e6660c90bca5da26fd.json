{"ast":null,"code":"import { collection, doc, getDoc, increment, orderBy, query, serverTimestamp, setDoc, updateDoc } from \"firebase/firestore\";\nimport { Link, Navigate, useNavigate } from 'react-router-dom';\nimport Product from './Product';\nimport './Home.css';\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { auth, db } from './backend/firebase';\nimport { defaultCartState, firstCall, updateCart } from \"./features/cartSlice\";\n\nconst handleAddToCart = (thisProduct, user) => {\n  if (user) {\n    const cartColRef = collection(db, \"Users\", user.userId, \"userCart\");\n    const createColRef = doc(db, \"Users\", user.userId, \"userCart\", `${thisProduct.id}`);\n    const q = query(cartColRef, orderBy(\"timestamp\", \"desc\"));\n    getDoc(createColRef).then(doc => {\n      if (doc.exists()) {\n        updateDoc(createColRef, {\n          quantity: increment(1),\n          productTotal: increment(thisProduct.price)\n        });\n      } else {\n        setDoc(createColRef, { ...thisProduct,\n          timestamp: serverTimestamp(),\n          quantity: 1,\n          productTotal: thisProduct.price\n        }).catch(err => {\n          console.log(err);\n        });\n      }\n    }); // else if (!createColRef) {\n    // }\n  } else {\n    Navigate('/signIn');\n  }\n};\n\nexport default handleAddToCart;","map":{"version":3,"names":["collection","doc","getDoc","increment","orderBy","query","serverTimestamp","setDoc","updateDoc","Link","Navigate","useNavigate","Product","useDispatch","useSelector","auth","db","defaultCartState","firstCall","updateCart","handleAddToCart","thisProduct","user","cartColRef","userId","createColRef","id","q","then","exists","quantity","productTotal","price","timestamp","catch","err","console","log"],"sources":["/Users/habeebawolumate/Documents/Builds/e-commerce/src/handleAddToCart.js"],"sourcesContent":["import {\n    collection,\n    doc,\n    getDoc,\n    increment,\n    orderBy,\n    query,\n    serverTimestamp,\n    setDoc,\n    updateDoc\n} from \"firebase/firestore\";\nimport { Link, Navigate, useNavigate } from 'react-router-dom';\nimport Product from './Product';\nimport './Home.css'\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { auth, db } from './backend/firebase';\nimport { defaultCartState, firstCall, updateCart } from \"./features/cartSlice\"\n\nconst handleAddToCart = (thisProduct, user) => {\n    \n    \n    if (user) {\n      const cartColRef = collection(db, \"Users\", user.userId, \"userCart\");\n      const createColRef = doc(db, \"Users\", user.userId, \"userCart\", `${thisProduct.id}`);\n      const q = query(cartColRef, orderBy(\"timestamp\", \"desc\"));\n      getDoc(createColRef)\n        .then((doc) => {\n          if (doc.exists()) {\n            updateDoc(createColRef, {\n              quantity: increment(1),\n              productTotal: increment(thisProduct.price)\n            })\n        } else{\n        setDoc(createColRef, {\n          ...thisProduct,\n          timestamp: serverTimestamp(),\n          quantity: 1,\n          productTotal: thisProduct.price\n        })\n        .catch((err)=>{\n          console.log(err)\n        })\n        }\n        \n      });\n      \n        \n              // else if (!createColRef) {\n\n        \n      // }\n      \n\n      \n    } else {\n      Navigate('/signIn');\n    }\n    \n}\nexport default handleAddToCart;"],"mappings":"AAAA,SACIA,UADJ,EAEIC,GAFJ,EAGIC,MAHJ,EAIIC,SAJJ,EAKIC,OALJ,EAMIC,KANJ,EAOIC,eAPJ,EAQIC,MARJ,EASIC,SATJ,QAUO,oBAVP;AAWA,SAASC,IAAT,EAAeC,QAAf,EAAyBC,WAAzB,QAA4C,kBAA5C;AACA,OAAOC,OAAP,MAAoB,WAApB;AACA,OAAO,YAAP;AACA,SAASC,WAAT,EAAsBC,WAAtB,QAAyC,aAAzC;AACA,SAASC,IAAT,EAAeC,EAAf,QAAyB,oBAAzB;AACA,SAASC,gBAAT,EAA2BC,SAA3B,EAAsCC,UAAtC,QAAwD,sBAAxD;;AAEA,MAAMC,eAAe,GAAG,CAACC,WAAD,EAAcC,IAAd,KAAuB;EAG3C,IAAIA,IAAJ,EAAU;IACR,MAAMC,UAAU,GAAGvB,UAAU,CAACgB,EAAD,EAAK,OAAL,EAAcM,IAAI,CAACE,MAAnB,EAA2B,UAA3B,CAA7B;IACA,MAAMC,YAAY,GAAGxB,GAAG,CAACe,EAAD,EAAK,OAAL,EAAcM,IAAI,CAACE,MAAnB,EAA2B,UAA3B,EAAwC,GAAEH,WAAW,CAACK,EAAG,EAAzD,CAAxB;IACA,MAAMC,CAAC,GAAGtB,KAAK,CAACkB,UAAD,EAAanB,OAAO,CAAC,WAAD,EAAc,MAAd,CAApB,CAAf;IACAF,MAAM,CAACuB,YAAD,CAAN,CACGG,IADH,CACS3B,GAAD,IAAS;MACb,IAAIA,GAAG,CAAC4B,MAAJ,EAAJ,EAAkB;QAChBrB,SAAS,CAACiB,YAAD,EAAe;UACtBK,QAAQ,EAAE3B,SAAS,CAAC,CAAD,CADG;UAEtB4B,YAAY,EAAE5B,SAAS,CAACkB,WAAW,CAACW,KAAb;QAFD,CAAf,CAAT;MAIH,CALC,MAKI;QACNzB,MAAM,CAACkB,YAAD,EAAe,EACnB,GAAGJ,WADgB;UAEnBY,SAAS,EAAE3B,eAAe,EAFP;UAGnBwB,QAAQ,EAAE,CAHS;UAInBC,YAAY,EAAEV,WAAW,CAACW;QAJP,CAAf,CAAN,CAMCE,KAND,CAMQC,GAAD,IAAO;UACZC,OAAO,CAACC,GAAR,CAAYF,GAAZ;QACD,CARD;MASC;IAEF,CAnBD,EAJQ,CA0BA;IAGR;EAID,CAjCD,MAiCO;IACLzB,QAAQ,CAAC,SAAD,CAAR;EACD;AAEJ,CAxCD;;AAyCA,eAAeU,eAAf"},"metadata":{},"sourceType":"module"}